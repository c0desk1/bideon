---
import { getCollection } from 'astro:content';
import PostCardBento from './PostCardBento.astro';

const allPosts = await getCollection('blog', ({ data }) => data.isFeatured === true);
const sorted = allPosts.sort((a, b) => new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime());
const mainPost = sorted[0];
const otherPosts = sorted.slice(1, 3);
---

<section class="bg-zinc-900">
  <div class="container mx-auto px-4 py-16">
    <div class="text-left mb-12">
      <p class="inline-block text-xs font-medium bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 text-transparent bg-clip-text uppercase tracking-wider">
        Unggulan
      </p>
      <h2 class="text-3xl font-bold text-white leading-snug">
        Postingan Unggulan
      </h2>
      <span class="text-sm text-zinc-400 mt-1 leading-relaxed max-w-md">
        Temukan pilihan artikel terbaik yang kami rekomendasikan untuk Anda.
      </span>      
    </div>

    {sorted.length > 0 ? (
      <div class="grid grid-cols-1 md:grid-cols-3 md:grid-rows-2 gap-6">
        {mainPost && <PostCardBento post={mainPost} isMain />}
        {otherPosts.map((p) => <PostCardBento post={p} />)}
      </div>
    ) : (
      <div class="border-2 border-dashed border-gray-700 rounded-lg p-12 text-center text-gray-500">
        <p>Tidak ada postingan pilihan saat ini.</p>
      </div>
    )}
  </div>
</section>
