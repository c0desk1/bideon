---
import { getCollection } from 'astro:content';
import PostCardBento from './PostCardBento.astro';

const allPosts = await getCollection('blog', ({ data }) => data.isFeatured === true);
const sorted = allPosts.sort((a, b) => new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime());
const mainPost = sorted[0];
const otherPosts = sorted.slice(1, 3);
---

<section class="bg-zinc-900">
  <div class="container mx-auto px-4 py-16">
    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold text-white">Postingan Unggulan</h2>
    </div>

    {sorted.length > 0 ? (
      <div class="grid grid-cols-1 md:grid-cols-3 md:grid-rows-2 gap-6">
        {mainPost && <PostCardBento post={mainPost} isMain />}
        {otherPosts.map((p) => <PostCardBento post={p} />)}
      </div>
    ) : (
      <div class="border-2 border-dashed border-gray-700 rounded-lg p-12 text-center text-gray-500">
        <p>Tidak ada postingan pilihan saat ini.</p>
      </div>
    )}
  </div>
</section>
