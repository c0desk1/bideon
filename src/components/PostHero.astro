---
// src/components/blog/PostHero.astro
interface Props {
  post: {
    title: string;
    images?: Array<{ url: string }>;
  };
}

const { post } = Astro.props;

// ... (formatDate function remains the same, though not used in this component now) ...

// Helper function to get the image URL
const getHeroImageUrl = (post: Props['post']): string => {
  if (post.images && post.images.length > 0) {
    const imageUrl = post.images[0].url;
    // --- START DEBUGGING LOGS ---
    console.log('DEBUG: PostHero - Original Blogger Image URL:', imageUrl);

    // Coba hanya mengambil URL asli tanpa manipulasi ukuran dulu
    // Ini adalah langkah paling dasar untuk melihat apakah gambar asli dari Blogger bisa dimuat.
    const cleanUrl = imageUrl.replace(/=s\d+(-c)?/, '').replace(/=w\d+-h\d+/, '');
    // Atau bisa juga langsung return imageUrl; jika ingin sangat mentah

    console.log('DEBUG: PostHero - Processed (less manipulated) Image URL:', cleanUrl);
    // --- END DEBUGGING LOGS ---
    return cleanUrl;
  }
  console.log('DEBUG: PostHero - No image found in post. Using fallback placeholder.');
  return 'https://via.placeholder.com/1200x675/1f2937/d1d5db?text=No+Image'; // Fallback
};

const heroImageUrl = getHeroImageUrl(post);
console.log('DEBUG: PostHero - Final URL rendered in IMG tag:', heroImageUrl);
---

<div class="relative w-full overflow-hidden mb-12 rounded-xl border border-gray-800 shadow-lg">
  <img
    src={heroImageUrl}
    alt={post.title}
    class="w-full h-auto object-cover max-h-[400px] md:max-h-[500px] rounded-xl"
    loading="eager"
  />
  <div class="absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent"></div>
</div>
