---
const siteKey = import.meta.env.PUBLIC_TURNSTILE_SITE_KEY;
---

<section class="w-full max-w-xl mx-auto rounded-2xl border border-[var(--color-border)] bg-[var(--color-card-bg)] px-6 py-8 text-center shadow-sm">
  <h2 class="text-2xl font-semibold text-[var(--color-text)]">Tetap terhubung</h2>
  <p class="mt-2 text-[var(--color-text-muted)] text-sm">
    Daftar untuk mendapatkan konten terbaru langsung ke email kamu. Tanpa spam.
  </p>

  <form 
    action="/api/newsletter-submit"
    method="POST"
    class="mt-6 flex flex-col sm:flex-row items-center gap-3 sm:gap-2"
  >
    <label for="newsletter-email" class="sr-only">Email</label>
    <input
      type="email"
      name="email"
      id="newsletter-email"
      required
      placeholder="kamu@email.com"
      class="flex-grow rounded-md border border-[var(--color-border)] bg-[var(--color-bg)] px-4 py-2 text-[var(--color-text)] placeholder:text-sm focus:border-[var(--color-accent)] focus:outline-none focus:ring-1 focus:ring-[var(--color-accent)]"
    />

    <button
      type="submit"
      class="rounded-md bg-[var(--color-accent)] px-5 py-2 text-sm font-medium text-white transition hover:bg-[var(--color-accent-dark)]"
    >
      Langganan
    </button>
  </form>

  <div class="mt-3 w-full">
    <div 
      class="cf-turnstile mx-auto max-w-sm"
      data-sitekey={siteKey}
    ></div>
  </div>

  <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>

  <p class="mt-4 text-xs text-[var(--color-text-muted)]">Kapan pun bisa berhenti langganan.</p>
</section>
