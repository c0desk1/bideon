---
// src/components/category.astro
import { getCollection, type CollectionEntry } from 'astro:content';


const allPosts: CollectionEntry<'blog'>[] = await getCollection('blog');
const uniqueCategories: string[] = [...new Set(allPosts.map(post => post.data.category).filter((c): c is string => typeof c === 'string'))];
// Atau lebih sederhana jika Anda yakin Boolean() cukup untuk filter non-nullish:
// const uniqueCategories: string[] = [...new Set(allPosts.map(post => post.data.category).filter(Boolean) as string[])];


uniqueCategories.sort((a, b) => a.localeCompare(b));
---

<section id="blog-categories" class="container mx-auto px-4 py-16">
  <div class="text-center mb-12">
    <h2 class="text-4xl font-bold text-white">Jelajahi Kategori</h2>
    <p class="mt-2 text-zinc-400 max-w-lg mx-auto">
      Temukan artikel berdasarkan topik yang Anda minati.
    </p>
  </div>

  <div class="flex flex-wrap justify-center gap-4">
    {uniqueCategories.length > 0 ? (
      uniqueCategories.map((categoryItem: string) => (
        <a
          href={`/blog/category/${categoryItem.toLowerCase().replace(/\s+/g, '-')}`}
          class="inline-block bg-zinc-700 text-white font-semibold py-3 px-6 rounded-lg hover:bg-zinc-600 transition-colors text-lg shadow-md"
        >
          {categoryItem}
        </a>
      ))
    ) : (
      <p class="text-zinc-400">Tidak ada kategori yang ditemukan.</p>
    )}
  </div>
</section>