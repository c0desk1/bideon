---
import { labelToSlug } from '../utils/label';
import PostMeta from './PostMeta.astro';

interface Props {
  post: {
    title: string;
    published: string;
    content?: string;
    labels?: string[];
    featureImage?: string;
    author?: {
      displayName: string;
      url: string;
      image?: { url: string };
    };
  };
}

const { post } = Astro.props;
---

<header class="relative mb-8 w-full overflow-hidden text-white">
  {post.featureImage && (
    <div class="absolute inset-0">
      <img 
        src={post.featureImage} 
        alt="" 
        class="h-full w-full object-cover blur-md brightness-50"
      />
      <div class="absolute inset-0 bg-black/40"></div>
    </div>
  )}

  <div class="relative z-10 mx-auto max-w-4xl px-4 py-16 text-left sm:py-24">
    <nav class="mb-4 flex items-center gap-2 text-sm text-gray-300">
      <a href="/" class="hover:text-white">Home</a>
      <span>/</span>
      <a href="/blog" class="hover:text-white">Blog</a>
    </nav>

    {post.labels && (
      <div class="mb-4 flex flex-wrap gap-2">
        {post.labels.map(label => (
          <a
            href={`/blog/label/${labelToSlug(label)}`}
            class="rounded-full bg-white/10 px-3 py-1 text-xs font-semibold text-cyan-300 backdrop-blur-sm transition-colors hover:bg-white/20"
          >
            {label}
          </a>
        ))}
      </div>
    )}

    <h1 class="mb-6 text-4xl font-extrabold leading-tight tracking-tight text-white drop-shadow-lg md:text-5xl">
      {post.title}
    </h1>

    <PostMeta author={post.author} published={post.published} content={post.content} />
  </div>
</header>
