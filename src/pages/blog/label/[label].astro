---
import { getAllLabels, getPostsByLabel } from '../../../utils/blogger';
import { slugToLabel, labelToSlug } from '../../../utils/label';
import PostCard from '../../../components/PostCard.astro';

export async function getStaticPaths() {
  const labels = await getAllLabels();
  return labels.map(label => ({
    params: {
      label: labelToSlug(label),
    },
  }));
}

const { label } = Astro.params;
const readableLabel = slugToLabel(label);

const posts = await getPostsByLabel(readableLabel);
---

<html lang="id">
  <head>
    <title>Label: {readableLabel}</title>
  </head>
  <body class="bg-black text-white">
    <main class="max-w-4xl mx-auto px-4 py-12">
      <h1 class="text-3xl font-bold mb-6">Label: <span class="text-blue-400">{readableLabel}</span></h1>

      {posts.length === 0 ? (
        <p class="text-gray-400">Tidak ada postingan dengan label ini.</p>
      ) : (
        <div class="grid gap-6">
          {posts.map((post: any) => (
            <PostCard post={post} />
          ))}
        </div>
      )}
    </main>
  </body>
</html>
