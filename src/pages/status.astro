---
// src/pages/status.astro
import BaseLayout from '../layouts/BaseLayout.astro';

interface IStats {
  totalViews: number;
  uptime: string;
  securityStatus: string;
}

const response = await fetch('https://bima-akbar-dev.bimasaktiakbarr.workers.dev/');
const stats: IStats = await response.json();

---
<BaseLayout title="System Status">
  <div class="max-w-2xl mx-auto py-8">
    <div class="prose dark:prose-invert">
      <h1>System Status</h1>
      <p>Berikut adalah statistik real-time untuk website ini yang didapatkan dari Cloudflare.</p>
    </div>
    <div class="mt-6 border-t border-zinc-200 dark:border-zinc-800">
      <dl class="divide-y divide-zinc-200 dark:divide-zinc-800">
        <div class="px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4">
          <dt class="text-sm font-medium text-zinc-500 dark:text-zinc-400">Total Views</dt>
          <dd class="mt-1 text-sm text-zinc-900 dark:text-white sm:col-span-2 sm:mt-0">{stats.totalViews.toLocaleString()}</dd>
        </div>
        <div class="px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4">
          <dt class="text-sm font-medium text-zinc-500 dark:text-zinc-400">Uptime (30 days)</dt>
          <dd class="mt-1 text-sm text-zinc-900 dark:text-white sm:col-span-2 sm:mt-0">{stats.uptime}</dd>
        </div>
        <div class="px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4">
          <dt class="text-sm font-medium text-zinc-500 dark:text-zinc-400">Security Status</dt>
          <dd class="mt-1 text-sm text-zinc-900 dark:text-white sm:col-span-2 sm:mt-0">{stats.securityStatus}</dd>
        </div>
      </dl>
    </div>
  </div>
</BaseLayout>
